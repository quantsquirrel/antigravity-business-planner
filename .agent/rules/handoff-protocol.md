# Handoff Protocol

ABP 산출물을 외부 도구로 전달하는 표준 형식을 정의합니다.

> ABP(Antigravity Business Planner)가 생성한 기획 문서, 명세서, 분석 결과를
> AI 코딩 도구, 노코드 도구, 자동화 도구에 바로 활용할 수 있도록 변환하는 규칙입니다.

---

## 기본 규칙

* ABP 산출물을 외부 도구에 전달할 때는 Context Prompt Packet 표준을 따릅니다.
* 대상 도구에 맞는 형식으로 변환하여 제공합니다.
* export-documents 워크플로우에서 "개발 도구용 변환" 옵션을 안내합니다.
* 비개발자도 바로 따라할 수 있는 한 줄 안내를 포함합니다.

---

## Context Prompt Packet 표준

ABP가 생성한 명세서를 AI 코딩 도구(Cursor, Windsurf 등)에 바로 붙여넣을 수 있는 형식입니다.

### 구조

```markdown
# [프로젝트명] - AI 코딩 도구용 컨텍스트

## 1. 프로젝트 설명
- 한 줄 요약: [서비스 한 줄 설명]
- 타겟 사용자: [핵심 페르소나]
- 핵심 가치: [사용자가 얻는 가치]

## 2. 기술 스택
- 프론트엔드: [예: Next.js 14, TypeScript, Tailwind CSS]
- 백엔드: [예: Supabase, Prisma]
- 인증: [예: Clerk]
- 결제: [예: Stripe]
- 배포: [예: Vercel]

## 3. 파일 구조
```
src/
├── app/           # Next.js App Router
├── components/    # UI 컴포넌트
├── lib/           # 유틸리티, API 클라이언트
├── types/         # TypeScript 타입 정의
└── ...
```

## 4. 핵심 기능 명세
### 기능 1: [기능명]
- 사용자 스토리: [누가, 무엇을, 왜]
- 입력: [필요한 데이터]
- 처리: [비즈니스 로직]
- 출력: [결과]

### 기능 2: [기능명]
...

## 5. 데이터 스키마
### [테이블/컬렉션명]
| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| id | UUID | O | 고유 식별자 |
| ... | | | |
```

### 작성 원칙

- 코드가 아닌 **명세**만 포함합니다 (ABP는 코드를 짜지 않습니다)
- AI 코딩 도구가 바로 구현을 시작할 수 있을 만큼 구체적으로 작성합니다
- 모호한 표현("적절하게", "필요에 따라")을 피하고 구체적 수치/기준을 명시합니다

---

## 대상별 변환 가이드

### 1. Cursor / Windsurf용 (AI 코딩 도구)

**변환 방식**: 마크다운 → System Prompt 형식

| ABP 산출물 | 변환 대상 | 변환 방법 |
|-----------|---------|---------|
| MVP 명세서 | .cursorrules 또는 CLAUDE.md | Context Prompt Packet 형식으로 변환 |
| 기술 스택 명세 | 프로젝트 설정 가이드 | 패키지 목록 + 설정 파일 명세 |
| 데이터 스키마 | 스키마 정의 파일 | SQL DDL 또는 Prisma 스키마 명세 |

**비개발자 안내**:
> "이 문서를 복사해서 Cursor의 `.cursorrules` 파일에 붙여넣으세요. Cursor가 이 내용을 참고해서 코드를 작성합니다."

> "Windsurf를 사용한다면 `.windsurfrules` 파일에 붙여넣으세요."

### 2. Make / n8n용 (자동화 도구)

**변환 방식**: 자동화 흐름도 → 시나리오 설명 형식

| ABP 산출물 | 변환 대상 | 변환 방법 |
|-----------|---------|---------|
| CS 자동화 워크플로우 | Make 시나리오 설명 | 트리거 → 조건 → 액션 순서로 기술 |
| 이메일 시퀀스 | n8n 워크플로우 설명 | 이벤트 → 대기 → 발송 순서로 기술 |
| 결제 흐름 | Stripe + Make 연동 설명 | Webhook → 처리 → 알림 순서로 기술 |

**시나리오 설명 형식**:
```
시나리오명: [이름]
트리거: [어떤 이벤트가 발생하면]
조건: [어떤 조건일 때]
액션 1: [무엇을 하고]
액션 2: [그 다음 무엇을 하고]
결과: [최종 결과]
```

**비개발자 안내**:
> "Make에서 새 시나리오를 만들 때 이 설명을 참고하세요. 각 단계를 Make의 모듈로 하나씩 추가하면 됩니다."

### 3. Bubble / FlutterFlow용 (노코드 도구)

**변환 방식**: 화면 명세 → 컴포넌트 목록 형식

| ABP 산출물 | 변환 대상 | 변환 방법 |
|-----------|---------|---------|
| 화면 구성 명세 | 페이지별 컴포넌트 목록 | 페이지 → 섹션 → 요소 순서로 나열 |
| 데이터 스키마 | Bubble Data Type 설명 | 필드명, 타입, 관계를 테이블로 정리 |
| 사용자 플로우 | Workflow 설명 | 버튼 클릭 → 데이터 처리 → 화면 이동 |

**컴포넌트 목록 형식**:
```
페이지: [페이지명]
├─ 헤더: 로고 + 네비게이션 (홈, 대시보드, 설정)
├─ 메인 섹션
│  ├─ 카드 컴포넌트: [제목, 설명, 버튼]
│  ├─ 리스트 컴포넌트: [데이터 반복 표시]
│  └─ 폼 컴포넌트: [입력 필드 목록]
└─ 푸터: 링크 목록 + 저작권
```

**비개발자 안내**:
> "Bubble에서 새 페이지를 만들 때 이 목록을 보면서 컴포넌트를 하나씩 배치하세요."

> "FlutterFlow를 사용한다면 같은 방식으로 위젯을 배치하세요."

---

## export-documents 워크플로우 연동

/export-documents 실행 시 아래 옵션을 추가로 안내합니다.

### 내보내기 옵션

| 옵션 | 설명 | 출력 형식 |
|------|------|---------|
| 기본 내보내기 | 기획 문서 그대로 | 마크다운 (.md) |
| **개발 도구용 변환** | AI 코딩 도구에 바로 사용 가능 | Context Prompt Packet |
| **자동화 도구용 변환** | Make/n8n 시나리오 설명 | 시나리오 설명 형식 |
| **노코드 도구용 변환** | Bubble/FlutterFlow 설계 | 컴포넌트 목록 형식 |

### 변환 시 주의사항

- ABP는 코드를 생성하지 않습니다. 명세와 구조만 제공합니다.
- 변환된 문서는 output/exports/ 폴더에 저장합니다.
- 변환 문서에 원본 산출물 경로를 참조로 포함합니다.

---

## 조건별 분기

| 조건 | 동작 |
|------|------|
| 사용자가 코딩 도구를 사용 | Cursor/Windsurf용 Context Prompt Packet 생성 |
| 사용자가 노코드 도구를 사용 | Bubble/FlutterFlow용 컴포넌트 목록 생성 |
| 사용자가 자동화 도구를 사용 | Make/n8n용 시나리오 설명 생성 |
| 도구 미지정 | 기본(마크다운) + "어떤 도구를 사용하시나요?" 질문 |
