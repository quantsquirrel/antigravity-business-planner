# security-scan

output/ 폴더의 산출물에서 개인정보 및 민감정보를 스캔합니다.

> 사업 기획 과정에서 실제 연락처, 사업 기밀 등이 산출물에 포함될 수 있습니다.
> 이 워크플로우는 산출물 공유 전 민감정보를 점검하는 사후 검증 도구입니다.
> 8단계 사업 기획 프로세스 완료 후 선택적으로 실행하는 보조 워크플로우입니다.

## 수행 작업
* output/ 폴더 내 모든 마크다운(.md) 파일을 스캔합니다
* 아래 스캔 패턴 표에 따라 개인정보 및 민감정보를 감지합니다
* 각 발견 항목의 위험도를 분류합니다 (Critical / Warning / Info)
* 마스킹 제안을 제공합니다 (자동 치환 예시)
* 스캔 결과 요약 리포트를 생성합니다

## 스캔 패턴

### 개인정보 패턴 (Critical)

| 패턴 | 설명 | 정규식 예시 | 마스킹 예시 |
|------|------|-----------|-----------|
| 전화번호 | 한국 휴대폰 | `01[016789]-\d{3,4}-\d{4}` | `010-****-****` |
| 주민등록번호 | 13자리 | `\d{6}-[1-4]\d{6}` | `******-*******` |
| 계좌번호 | 은행 계좌 | `\d{3,4}-\d{2,6}-\d{2,6}` | `***-****-****` |
| 카드번호 | 16자리 | `\d{4}-\d{4}-\d{4}-\d{4}` | `****-****-****-****` |
| 여권번호 | 영문+숫자 | `[A-Z]{1,2}\d{7,8}` | `M*******` |

### 연락처/계정 패턴 (Warning)

| 패턴 | 설명 | 정규식 예시 | 마스킹 예시 |
|------|------|-----------|-----------|
| 이메일 | @ 포함 | `[\w.-]+@[\w.-]+\.\w+` | `u***@domain.com` |
| 주소 | 한국 도로명/지번 | 도로명, 번지 패턴 | `서울시 **구 **동` |
| 사업자등록번호 | 10자리 | `\d{3}-\d{2}-\d{5}` | `***-**-*****` |

### 사업 기밀 패턴 (Warning)

| 패턴 | 설명 | 감지 키워드 |
|------|------|-----------|
| API 키 | 서비스 키 | `sk-`, `key_`, `api_key`, `secret` |
| 비밀번호 | 패스워드 | `password:`, `pw:`, `비밀번호:` |
| 실제 매출 | 내부 수치 | 구체적 금액 + "실제", "확정" 키워드 동시 출현 |

### 참고 패턴 (Info)

| 패턴 | 설명 | 비고 |
|------|------|------|
| 대표자 성명 | 실명 | "대표:", "성명:" 뒤의 한글 2-4자 |
| 상호명 | 사업체명 | "상호:", "회사명:" 뒤 텍스트 |

## 출력 형식

### 스캔 결과 표
| # | 파일 | 라인 | 패턴 | 발견 내용 | 위험도 | 마스킹 제안 |
|---|------|------|------|----------|--------|-----------|
| 1 | financials/projection.md | L23 | 전화번호 | 010-1234-5678 | Critical | 010-****-**** |
| ... | | | | | | |

### 요약 통계
| 위험도 | 발견 수 |
|--------|--------|
| 🔴 Critical | 0건 |
| 🟡 Warning | 0건 |
| 🔵 Info | 0건 |
| **합계** | **0건** |

* output/reports/security-scan-result.md에 결과를 저장합니다

## 스캔 옵션
* `--all`: output/ 전체 스캔 (기본)
* `--idea {id}`: 특정 아이디어 폴더만 스캔
* `--fix`: 마스킹 자동 적용 (사용자 확인 후)

## 주의사항
* 이 스캔은 정규식 기반 패턴 매칭이며, 모든 민감정보를 감지하지 못할 수 있습니다
* 맥락 기반 민감정보 (예: 추정치 vs 실제 수치)는 사용자가 직접 판단해야 합니다
* 스캔 결과가 "0건"이라도 공유 전 육안 확인을 권장합니다

## 다음 단계
* 민감정보 발견 시 → 마스킹 적용 후 `/export-documents`로 문서 내보내기
* 전체 진행률 확인 → `/check-progress`
